  ---
    layout: default
    title: Generics without Collections, Pt. 3
    ---

  <p>Over the weekend, I attended the third <a href="http://www.njcodecamp.org/">NJ Code Camp.</a> And since the moderators asked nicely, I presented this series as a talk.  Overall, the lecture didn't go well. (I was too nervous and talk too quickly.  Oddly, on one of the evaluation sheets, someone complained that I was talking too loudly, which I first is the first time in my life that was ever said about me)</p> <p>Also, I think I was a victom of scheduling a bit.  My presentation was during the first shift, and was on an advanced topic.  The other generics talk that day (by Kevin Goff), which was much more of an introduction to generics, was given during the last shift.  So, if you didn't know generics well, you'd be completely confused by my talk.  But, if you'd seen Kevin's first, and then saw mine, it would have made more sense.</p> <p>Anyway, for the presetation I came up with a few more examples, which I'll be posting to the blog in the upcoming days (between Rev. Billy updates --- Remember the day after Thanksgiving is [wikipeida:Buy Nothing Day])</p> <p> </p> <p>One of the attendees to the presentation mentioned that he could use generics to simplify parsing enums, and another said that he'd already done it.  It took me only a few moments to write the code, so I figured I'd share it with you:</p> <p>Presently, to parse a string into a enum value, you have to write it like this:</p> <div class="csharpcode"><pre class="alt"><span class="lnum">   1:  </span><span class="kwrd">enum</span> ABC {Able, Baker, Charlie};</pre><pre><span class="lnum">   2:  </span><span class="kwrd">string</span> str = <span class="str">"Charlie"</span>;</pre><pre class="alt"><span class="lnum">   3:  </span>ABC c = (ABC) Enum.Parse(<span class="kwrd">typeof</span>(ABC), str);</pre></div>
<p> </p>
<p>No big deal, but it's a bit ugly, and you have to specify the enum name twice, and if you type a mismatch, you get a run-time error.    Let's see how we can make this a bit prettier &amp; safer with generics.</p>
<div class="csharpcode"><pre class="alt"><p><span class="kwrd">static</span> <span class="kwrd">class</span> Enumr</p>
{</pre><pre class="alt">    <span class="kwrd">public</span> T Parse&lt;T&gt;(<span class="kwrd">string</span> <span class="kwrd">value</span>)</pre><pre>    {</pre><pre class="alt">        <span class="kwrd">return</span> (T) Enum.Parse(<span class="kwrd">typeof</span>(T), str);</pre><pre>    }</pre><pre class="alt">}</pre>
<p>Which would be used like this </p></div>
<p><span class="lnum">   1: </span><span class="kwrd">enum</span> ABC {Able, Baker, Charlie};</p>
<div class="csharpcode"><pre><span class="lnum">   2:  </span><span class="kwrd">string</span> str = <span class="str">"Charlie"</span>;</pre><pre class="alt"><span class="lnum">   3:  </span>ABC c = Enum.Parse&lt;ABC&gt;(str);</pre></div>
<p> This way is a bit easier to read &amp; type, and a mismatch specifiying the enum names will cause a complie-time error.</p>
<p>Oddly, just this morning I found a link to a <a href="http://www.codekeep.net/snippets/5fd04f07-a8cc-445c-9fbe-a076cb133afd.aspx">page</a> giving a very similar method to convert a int to an enum, namely</p>
<div class="csharpcode"><pre class="alt"><span class="lnum">   1:  </span><span class="kwrd">public</span> <span class="kwrd">static</span> E ConvertIntToEnum&lt;E&gt;(<span class="kwrd">int</span> <span class="kwrd">value</span>)</pre><pre><span class="lnum">   2:  </span>{</pre><pre class="alt"><span class="lnum">   3:  </span>    <span class="kwrd">return</span> (E)System.Enum.ToObject(<span class="kwrd">typeof</span>(E), <span class="kwrd">value</span>);</pre><pre><span class="lnum">   4:  </span>}</pre></div>But that method is completely unecessary. You can convert an int to and enum (and an enum to an int), by simple casting: 
<p>
</p><div class="csharpcode"><pre class="alt">ABC a = ABC.Able;</pre><pre><span class="kwrd">int</span> ai = (<span class="kwrd">int</span>) a;</pre><pre class="alt">ABC aa = (ABC) ai;</pre></div>
<p> </p>
<p> </p><pre></pre><a href="http://www.dotnetkicks.com/kick/?url=http://honestillusion.com/blogs/blog_0/archive/2006/11/20/Generics-without-Collections_2C00_-Pt.-3.aspx"><img alt="kick it on DotNetKicks.com" src="http://www.dotnetkicks.com/Services/Images/KickItImageGenerator.ashx?url=http://honestillusion.com/blogs/blog_0/archive/2006/11/20/Generics-without-Collections_2C00_-Pt.-3.aspx" border="0" /></a>