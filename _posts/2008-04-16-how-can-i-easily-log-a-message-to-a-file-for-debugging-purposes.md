---
layout: default
title: How can I easily log a message to a file for debugging purposes?
---

  <p>Today, either Bloglines.com or blogs.MSDN.com blinked, and suddenly I'm seeing old entries on the 'C# Frequently Asked Questions' blog as new.  No one has posted anything there in over two years. </p> <p>Anyway, reading the most recent message, it offered a method for logging a message.  Now, ignoring side debates over log4net vs nLog vs. the Event log vs. Trace, and just concentrating on the code post --- It's not very good.  Look for yourself (then come back here)  <a title="http://blogs.msdn.com/csharpfaq/archive/2006/03/27/562555.aspx" href="http://blogs.msdn.com/csharpfaq/archive/2006/03/27/562555.aspx">http://blogs.msdn.com/csharpfaq/archive/2006/03/27/562555.aspx</a></p> <p>Despite being written by a C# MVP (*), it shows a lack of understanding of basic .Net library features, and well as C#.  So, I figured, I'd rewrite it.  I limited myself to taking what's there and fixing it instead of going an entirely different way (ie, log4net vs nLog vs etc).  Here's the revised code:</p> <div class="csharpcode"><pre class="alt"><span class="kwrd">using</span> System.IO;</pre><pre class="alt"><span class="kwrd">public</span> <span class="kwrd">void</span> LogMessageToFile(<span class="kwrd">string</span> msg)</pre><pre>{</pre><pre class="alt">    <span class="kwrd">string</span> logFilepath = Path.Combine(Environment.GetEnvironmentVariable(<span class="str">"TEMP"</span>),<span class="str">"My Log File.txt"</span>);</pre><pre>    <span class="kwrd">using</span> (StreamWriter sw = File.AppendText(logFilepath))</pre><pre class="alt">    {</pre><pre>        <span class="kwrd">string</span> logLine = String.Format(<span class="str">"{0:G}: {1}."</span>, DateTime.Now, msg);</pre><pre class="alt">        sw.WriteLine(logLine);</pre><pre>    }</pre><pre class="alt">}</pre></div>
<p> </p>
<p>A few years ago, I bought a number of books, all with the title of same variation of "C# Cookbook".  Again, a lot of bad code.  I've been meaning to start a series of articles about revising them.....</p>
<p> </p>
<p>(*) Years ago, I was one of the very first C++ MVPs.  After ten years, I was dropped from the program.  Since then I've tried to become a C# MVP, without any luck. I'm beginning to get bitter about it.  ;-)</p>